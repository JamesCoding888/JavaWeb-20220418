<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet"
	href="https://unpkg.com/purecss@2.1.0/build/pure-min.css">
<meta charset="UTF-8">
<title>Message Form</title>
<script>
	// 預覽Web圖 
	function previewWebImage() {
		var webImageUrl = document.getElementById('webImageUrl').value;
		webImageUrl = webImageUrl.trim();
		if(webImageUrl != '') {
			if(!(webImageUrl.indexOf('http://') >= 0 || webImageUrl.indexOf('https://') >= 0)) {
				// 自動在網址前面加上 https://			
				document.getElementById('webImageUrl').value = 'https://' + webImageUrl;
				// 重新抓取 webImageUrl 資料
				webImageUrl = document.getElementById('webImageUrl').value;
			}
		}
		console.log(webImageUrl); // 印在瀏覽器的 console 中
		document.getElementById('previewWebImageArea').innerHTML = "<img src='" + webImageUrl + "'>";
	}
	
	// 表單傳送前的驗證
	function beforeSubmit() {
		// 2.若 webImageUrl 欄位有資料且前面沒有加上http:// 或 https://, 則統一補上 https://
		var webImageUrl = document.getElementById('webImageUrl').value;
		webImageUrl = webImageUrl.trim();
		if(webImageUrl != '') {
			if(!(webImageUrl.indexOf('http://') >= 0 || webImageUrl.indexOf('https://') >= 0)) {
				// 自動在網址前面加上 https://			
				document.getElementById('webImageUrl').value = 'https://' + webImageUrl;
			}
		}
		return true;
	}
	
</script>

</head>
<body style="padding: 20px">
	<form class="pure-form" method="post" onsubmit="return beforeSubmit()" action="">
		<fieldset>
			<legend>Message Form</legend>
			網路圖片位址: 
			<input type="text" name="webImageUrl" id="webImageUrl" value="" />
			<button type="button" onclick="previewWebImage()" class="pure-button pure-button-primary">
				預覽
			</button>
			<div id="previewWebImageArea"></div>
			<p />
			<button type="submit" class="pure-button pure-button-primary">
				傳送
			</button>
		</fieldset>
	</form>
</body>
</html>